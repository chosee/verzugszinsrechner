<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schweizer MWST-Rechner - Mehrwertsteuer berechnen</title>
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <meta name="description" content="Berechnen Sie die Schweizer Mehrwertsteuer (MWST). Normalsatz 8.1%, reduzierter Satz 2.6%, Beherbergung 3.8%. Brutto zu Netto und umgekehrt.">
    <meta name="keywords" content="MWST-Rechner, Mehrwertsteuer, MwSt, Schweiz, 8.1%, Normalsatz, reduzierter Satz, Beherbergung, Brutto, Netto">
    <meta name="author" content="Durchblick Consultancy BV">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://verzugszinsrechner.ch/de/mwst.html">
    <meta property="og:title" content="Schweizer MWST-Rechner - Mehrwertsteuer berechnen">
    <meta property="og:description" content="Berechnen Sie die Schweizer Mehrwertsteuer (MWST). Normalsatz 8.1%, reduzierter Satz 2.6%, Beherbergung 3.8%.">
    <meta property="og:image" content="https://verzugszinsrechner.ch/images/og-zins-de.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="de_CH">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Schweizer MWST-Rechner - Mehrwertsteuer berechnen">
    <meta name="twitter:description" content="Berechnen Sie die Schweizer Mehrwertsteuer (MWST). Normalsatz 8.1%, reduzierter Satz 2.6%, Beherbergung 3.8%.">
    <meta name="twitter:image" content="https://verzugszinsrechner.ch/images/og-zins-de.png">

    <!-- Canonical & Language -->
    <link rel="canonical" href="https://verzugszinsrechner.ch/de/mwst.html">
    <link rel="alternate" hreflang="de" href="https://verzugszinsrechner.ch/de/mwst.html">
    <link rel="alternate" hreflang="fr" href="https://verzugszinsrechner.ch/fr/mwst.html">

    <!-- JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Schweizer MWST-Rechner",
        "description": "Berechnen Sie die Schweizer Mehrwertsteuer (MWST)",
        "url": "https://verzugszinsrechner.ch/de/mwst.html",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web",
        "inLanguage": "de-CH",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "CHF"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Durchblick Consultancy BV",
            "url": "https://durchblick.nl"
        }
    }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Economica:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        .tool-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .tool-nav a {
            padding: 8px 16px;
            background: #f5f5f5;
            border-radius: 4px;
            text-decoration: none;
            color: #3f606f;
            font-family: 'Economica', sans-serif;
            font-weight: 600;
            transition: all 0.2s;
        }
        .tool-nav a:hover {
            background: #e8e8e8;
        }
        .tool-nav a.active {
            background: #3f606f;
            color: white;
        }
        [data-theme="dark"] .tool-nav a {
            background: var(--card-bg);
            color: var(--primary-color);
        }
        [data-theme="dark"] .tool-nav a:hover {
            background: var(--border-color);
        }
        [data-theme="dark"] .tool-nav a.active {
            background: var(--primary-color);
            color: var(--bg-color);
        }

        .direction-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .direction-btn {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid var(--primary-color);
            background: var(--card-bg);
            color: var(--primary-color);
            border-radius: 8px;
            font-family: 'Economica', sans-serif;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.2s;
        }
        .direction-btn:hover {
            background: var(--light-bg);
        }
        .direction-btn.active {
            background: var(--primary-color);
            color: white;
        }

        .rate-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        @media (max-width: 600px) {
            .rate-cards {
                grid-template-columns: 1fr;
            }
        }
        .rate-card {
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        .rate-card:hover {
            border-color: var(--primary-color);
            background: var(--light-bg);
        }
        .rate-card.active {
            border-color: var(--primary-color);
            background: var(--primary-color);
            color: white;
        }
        .rate-card .rate-value {
            font-family: 'Economica', sans-serif;
            font-size: 1.8em;
            font-weight: 700;
        }
        .rate-card .rate-label {
            font-size: 0.9em;
            margin-top: 5px;
        }

        .result-breakdown {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }
        .result-row:last-child {
            border-bottom: none;
        }
        .result-row.total {
            font-weight: bold;
            padding-top: 15px;
            margin-top: 10px;
            border-top: 2px solid var(--primary-color);
            border-bottom: none;
        }
        .result-row .label {
            color: var(--text-muted);
        }
        .result-row .amount {
            font-family: 'Economica', sans-serif;
            font-weight: 700;
            font-size: 1.1em;
        }

        .info-card {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }
        .info-card h3 {
            margin: 0 0 15px 0;
            color: var(--primary-color);
            font-family: 'Economica', sans-serif;
        }
        .info-card table {
            width: 100%;
            border-collapse: collapse;
        }
        .info-card th, .info-card td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .info-card th {
            font-weight: 600;
            color: var(--primary-color);
        }
        .info-card td:last-child {
            text-align: right;
            font-family: 'Economica', sans-serif;
            font-weight: 700;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-row">
            <button type="button" class="dark-mode-toggle" aria-label="Dunkelmodus umschalten" onclick="DarkMode.toggle()">
                <i class="fas fa-moon"></i>
            </button>
            <div class="language-switcher">
                <a href="../de/mwst.html" class="lang-btn active">DE</a>
                <a href="../fr/mwst.html" class="lang-btn">FR</a>
            </div>
        </div>

        <h1><img src="../favicon.svg" alt="" class="title-icon">Schweizer MWST-Rechner</h1>

        <nav class="tool-nav">
            <a href="../de/">Verzugszinsen</a>
            <a href="../de/mahnrechner.html">Mahnrechner</a>
            <a href="../de/mwst.html" class="active">MWST</a>
        </nav>

        <div class="steps-container">
            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-exchange-alt"></i>
                    <div class="step-number">1</div>
                </div>
                <div class="step-content">
                    <h3>Richtung wählen</h3>
                    <p>Brutto zu Netto oder Netto zu Brutto - je nachdem, welchen Betrag Sie kennen.</p>
                </div>
            </div>

            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-percent"></i>
                    <div class="step-number">2</div>
                </div>
                <div class="step-content">
                    <h3>MWST-Satz wählen</h3>
                    <p>Normalsatz 8.1%, reduzierter Satz 2.6% oder Beherbergung 3.8%.</p>
                </div>
            </div>

            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-calculator"></i>
                    <div class="step-number">3</div>
                </div>
                <div class="step-content">
                    <h3>Berechnen</h3>
                    <p>Netto, MWST-Betrag und Brutto werden automatisch berechnet.</p>
                </div>
            </div>
        </div>

        <div class="calculator-card">
            <div class="direction-toggle">
                <button type="button" class="direction-btn active" data-direction="gross-to-net">
                    <i class="fas fa-arrow-down"></i> Brutto → Netto
                </button>
                <button type="button" class="direction-btn" data-direction="net-to-gross">
                    <i class="fas fa-arrow-up"></i> Netto → Brutto
                </button>
            </div>

            <div class="rate-cards">
                <div class="rate-card active" data-rate="8.1">
                    <div class="rate-value">8.1%</div>
                    <div class="rate-label">Normalsatz</div>
                </div>
                <div class="rate-card" data-rate="2.6">
                    <div class="rate-value">2.6%</div>
                    <div class="rate-label">Reduzierter Satz</div>
                </div>
                <div class="rate-card" data-rate="3.8">
                    <div class="rate-value">3.8%</div>
                    <div class="rate-label">Beherbergung</div>
                </div>
            </div>

            <form id="mwstForm">
                <div class="form-group">
                    <label for="amount" class="required" id="amountLabel">Bruttobetrag (CHF)</label>
                    <input type="text"
                           id="amount"
                           name="amount"
                           inputmode="decimal"
                           placeholder="z.B. 1000.00"
                           required>
                    <small class="form-hint" id="amountHint">Der Betrag inkl. Mehrwertsteuer</small>
                </div>

                <button type="submit" class="submit-btn">
                    <i class="fas fa-calculator"></i>
                    Berechnen
                </button>
            </form>

            <div id="result" class="result-section" style="display: none;">
                <h3>Berechnung</h3>
                <div class="result-breakdown">
                    <div class="result-row">
                        <span class="label">Nettobetrag</span>
                        <span class="amount" id="netAmount">CHF 0.00</span>
                    </div>
                    <div class="result-row">
                        <span class="label">MWST (<span id="rateDisplay">8.1%</span>)</span>
                        <span class="amount" id="vatAmount">CHF 0.00</span>
                    </div>
                    <div class="result-row total">
                        <span class="label">Bruttobetrag</span>
                        <span class="amount" id="grossAmount">CHF 0.00</span>
                    </div>
                </div>

                <div class="action-buttons">
                    <button type="button" class="action-btn" onclick="copyResult()">
                        <i class="fas fa-copy"></i> Kopieren
                    </button>
                    <button type="button" class="action-btn" onclick="shareResult()">
                        <i class="fas fa-share-alt"></i> Teilen
                    </button>
                </div>
            </div>
        </div>

        <div class="info-card">
            <h3><i class="fas fa-info-circle"></i> MWST-Sätze in der Schweiz (ab 2024)</h3>
            <table>
                <tr>
                    <th>Satz</th>
                    <th>Anwendung</th>
                    <th>Rate</th>
                </tr>
                <tr>
                    <td>Normalsatz</td>
                    <td>Die meisten Waren und Dienstleistungen</td>
                    <td>8.1%</td>
                </tr>
                <tr>
                    <td>Reduzierter Satz</td>
                    <td>Lebensmittel, Bücher, Zeitungen, Medikamente</td>
                    <td>2.6%</td>
                </tr>
                <tr>
                    <td>Sondersatz</td>
                    <td>Beherbergungsleistungen (Hotels etc.)</td>
                    <td>3.8%</td>
                </tr>
            </table>
            <p style="margin-top: 15px; font-size: 0.9em; color: var(--text-muted);">
                <strong>Rechtsgrundlage:</strong> <a href="https://www.fedlex.admin.ch/eli/cc/2009/615/de" target="_blank" rel="noopener">Mehrwertsteuergesetz (MWSTG)</a> |
                <a href="https://www.estv.admin.ch/estv/de/home/mehrwertsteuer/mwst-steuersaetze.html" target="_blank" rel="noopener">Aktuelle MWST-Sätze (ESTV)</a>
            </p>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <p><a href="https://durchblick.nl/tools_de.html" target="_blank" rel="noopener">Durchblick Consultancy BV – Kostenlose Rechtstools für die Schweiz</a></p>
            <p class="footer-disclaimer">Dieser Rechner dient nur zur Orientierung. Keine Rechtsberatung.</p>
            <p class="footer-privacy">Alle Berechnungen erfolgen direkt in Ihrem Browser. Es werden keine Nutzerdaten erhoben oder gespeichert.</p>
        </div>
    </footer>

    <script src="../scripts/utils.js"></script>
    <script>
        // State
        let direction = 'gross-to-net';
        let rate = 8.1;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            DarkMode.init();

            // Direction toggle
            document.querySelectorAll('.direction-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.direction-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    direction = this.dataset.direction;
                    updateLabels();
                });
            });

            // Rate cards
            document.querySelectorAll('.rate-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.rate-card').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    rate = parseFloat(this.dataset.rate);
                });
            });

            // Form submit
            document.getElementById('mwstForm').addEventListener('submit', function(e) {
                e.preventDefault();
                calculate();
            });

            // Auto-calculate on input
            document.getElementById('amount').addEventListener('input', function() {
                if (this.value) {
                    calculate();
                }
            });
        });

        function updateLabels() {
            const label = document.getElementById('amountLabel');
            const hint = document.getElementById('amountHint');

            if (direction === 'gross-to-net') {
                label.innerHTML = 'Bruttobetrag (CHF)';
                hint.textContent = 'Der Betrag inkl. Mehrwertsteuer';
            } else {
                label.innerHTML = 'Nettobetrag (CHF)';
                hint.textContent = 'Der Betrag exkl. Mehrwertsteuer';
            }
        }

        function calculate() {
            const amountStr = document.getElementById('amount').value.replace(/['\s]/g, '').replace(',', '.');
            const amount = parseFloat(amountStr);

            if (isNaN(amount) || amount <= 0) {
                return;
            }

            let netAmount, vatAmount, grossAmount;

            if (direction === 'gross-to-net') {
                // Brutto zu Netto: Netto = Brutto / (1 + Rate/100)
                grossAmount = amount;
                netAmount = amount / (1 + rate / 100);
                vatAmount = grossAmount - netAmount;
            } else {
                // Netto zu Brutto: Brutto = Netto * (1 + Rate/100)
                netAmount = amount;
                vatAmount = amount * rate / 100;
                grossAmount = netAmount + vatAmount;
            }

            // Display results
            document.getElementById('netAmount').textContent = formatCHF(netAmount);
            document.getElementById('vatAmount').textContent = formatCHF(vatAmount);
            document.getElementById('grossAmount').textContent = formatCHF(grossAmount);
            document.getElementById('rateDisplay').textContent = rate + '%';
            document.getElementById('result').style.display = 'block';

            // Update URL
            updateURL(amount);
        }

        function formatCHF(amount) {
            return 'CHF ' + amount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, "'");
        }

        function updateURL(amount) {
            const params = new URLSearchParams();
            params.set('betrag', amount);
            params.set('satz', rate);
            params.set('richtung', direction);

            const newURL = window.location.pathname + '?' + params.toString();
            window.history.replaceState({}, '', newURL);
        }

        function copyResult() {
            const net = document.getElementById('netAmount').textContent;
            const vat = document.getElementById('vatAmount').textContent;
            const gross = document.getElementById('grossAmount').textContent;

            const text = `MWST-Berechnung (${rate}%)\n` +
                        `Nettobetrag: ${net}\n` +
                        `MWST: ${vat}\n` +
                        `Bruttobetrag: ${gross}`;

            navigator.clipboard.writeText(text).then(() => {
                alert('Ergebnis kopiert!');
            });
        }

        function shareResult() {
            const url = window.location.href;

            if (navigator.share) {
                navigator.share({
                    title: 'MWST-Berechnung',
                    text: 'MWST-Berechnung auf verzugszinsrechner.ch',
                    url: url
                });
            } else {
                navigator.clipboard.writeText(url).then(() => {
                    alert('Link kopiert!');
                });
            }
        }

        // Load from URL params
        (function() {
            const params = new URLSearchParams(window.location.search);

            if (params.has('betrag')) {
                document.getElementById('amount').value = params.get('betrag');
            }
            if (params.has('satz')) {
                rate = parseFloat(params.get('satz'));
                document.querySelectorAll('.rate-card').forEach(card => {
                    card.classList.toggle('active', parseFloat(card.dataset.rate) === rate);
                });
            }
            if (params.has('richtung')) {
                direction = params.get('richtung');
                document.querySelectorAll('.direction-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.direction === direction);
                });
                updateLabels();
            }

            if (params.has('betrag')) {
                setTimeout(calculate, 100);
            }
        })();
    </script>
</body>
</html>
